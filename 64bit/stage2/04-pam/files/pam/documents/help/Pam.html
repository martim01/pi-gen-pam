<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=windows-1252">
  </head>
  <body>
    <h1>Introduction</h1>
    <p><strong>P</strong>i<strong>A</strong>udio<strong>M</strong>onitor is a
      suite of audio monitoring tools designed to run on a Raspberry Pi with the
      official Pi Touchscreen. The software will also run on other flavours of
      Linux and Windows.</p>
    PAM is based on a plugin infrastructure. There is a core application which
    deals with audio input and output and hosts plugins that display the
    monitoring metrics.
    <p>There are three types of plugin</p>
    <ul>
      <li>Monitoring - these are screens which are intended to show the real
        time state of the audio (e.g. PPM meters, FFT, Lissajou)</li>
      <li>Test - these are screens which are intended to allow the user to run
        specific tests on the audio (e.g. Channel Delay, Distortion)</li>
      <li>Generator - these are plugins that are used by PAM to generate audio
        output.</li>
    </ul>
    <p><img src="images/2813_splash.JPG" alt="splash" height="240" width="400" border="0"></p>
    <p>The application will startup with the splash screen above whilst the
      plugins are loaded.</p>
    <p>Once everything is loaded the application will default to the panel that
      it was on when it closed.</p>
    <p><img src="images/2813_mode.JPG" alt="main screen" height="240" width="399" border="0"></p>
    <p>Tapping on the panel should bring up the <strong><span style="color: #33cccc;">Screens/</span></strong><strong><span
          style="color: #33ccff;">Options&nbsp;</span></strong><span style="color: #000000;"></span>menu
      and tapping on the panel again should make the plugin go back to full
      screen.</p>
    <p>Note: not all plugins have a full screen mode. If not then the <strong><span
          style="color: #33cccc;">Screens/</span></strong><strong><span style="color: #33ccff;">Options&nbsp;</span></strong><span
        style="color: #000000;"></span>menu will always be displayed.</p>
    <p> <img src="images/screen_options.png" alt="ScreenMenu" title="screen_options" height="240" width="399" border="0"></p>
    <p> The two tab buttons on the right hand side allow the user to: </p>
    <ul>
      <li>Show the&nbsp;<strong><span style="color: #33cccc;">Screen Selection</span></strong>
        buttons. </li>
      <li>Show the <strong><span style="color: #33ccff;">Option Selection</span></strong>
        buttons. </li>
    </ul>
    <p><strong><span style="color: #33cccc;">Screen Selection</span></strong></p>
    <p>This lists all the Monitor and Test plugins and allow the user to change
      what screen they are looking at. Underneath this list are a number of
      other buttons that allow the user to</p>
    <ul>
      <li>Select the Log</li>
      <li>Select the Global Settings</li>
      <li>Select Help for the plugin they are currently looking at.</li>
      <li>Select whether the plugins are showing the audio from the input to the
        PAM or the audio the PAM is outputting.</li>
      <li>See the status of the CPU and input and output devices (left and right
        bottom respectively).</li>
    </ul>
    <p>Note: If the input device is <strong>AoIP </strong>(as the image above)
      then the user can tap the green button to bring up an AoIP selection panel
      as below</p>
    <img src="images/aoip_selection.png" alt="aoip_select" title="aoip_selection" height="240" width="399" border="0">
    <p><span style="color: #000000;"><strong><span style="color: #33ccff;">Option
            Selection</span></strong><br>
      </span></p>
    <p><span style="color: #000000;">Shows the possible options for the selected
        plugin (see FFT example below).</span> </p>
    <img src="images/options_panel.png" alt="Options Panel" title="Options" height="240" width="399" border="0">
    <p><br>
    </p>
    <h2>Settings </h2>
    <p>The settings page is built in to the core application. It is can be found
      by choosing the <strong><span style="color: #33cccc;">Screens&nbsp;</span></strong>tab.
      Note: it is possible to set a PIN to protect entry to the Settings screens</p>
    <p>It consists of a number of sub-pages which can be selected by pressing
      one of the <strong><span style="color: #33ccff;">Option Selection </span></strong>buttons:</p>
    <ul>
      <li>Input Device</li>
      <li>Output Device</li>
      <li>Output Source</li>
      <li>Network</li>
      <li>Time</li>
      <li>NMOS (optional)</li>
      <li>Plugins</li>
      <li>Profiles</li>
      <li>General</li>
      <li>Update</li>
    </ul>
    <p>The stop strap of the page shows the hostname of the unit and the current
      version number of the core application.</p>
    <h4>Input Device</h4>
    <img src="images/settings_input_soundcard.png" alt="" height="240" width="399" border="0">
    <p>The audio input page allows the user to select what audio source he is
      monitoring. The page is divided in to two sections. The top list shows the
      input types and the list below shows all possible inputs of the selected
      type. </p>
    <p>The buttons at the bottom are (from left to right) <span style="color: #996600;">Home</span>,
      <span style="color: #996600;">Previous Page</span>, <span style="color: #996600;">Next
        Page</span>, <span style="color: #996600;">End</span>. They only show
      if there are more possible inputs than space on the panel.</p>
    <p>There is a gain slider at the bottom which can be used to change the
      volume of the incoming audio (Note: this is done in software not
      controlling any hardware).</p>
    <p>There are 4 possible input types</p>
    <ul>
      <li>Disabled</li>
      <li>Soundcard</li>
      <li>AoIP</li>
      <li>AoIP Manual</li>
    </ul>
    <h5><strong>Disabled</strong></h5>
    <p>Turns off the audio input</p>
    <h5>Soundcard</h5>
    <p>Selecting this will list all possible physical audio inputs to the
      raspberry pi. If you have the HifiBerry digi+ hat connected then you
      should select <span style="color: #3333ff;">snd_rpi_hifiberry_digi:</span></p>
    AoIP
    <p>Selecting this will list all discovered or manually entered
      AES67/Livewire/Ravenna sources. You can edit this list by pressing the
      Manage button. This will bring up the AoIP screen</p>
    <p><img src="images/2813_aoip.png" alt="" height="240" width="400" border="0"></p>
    <p>From here you can manually add/edit/delete AoIP sources</p>
    <p><img src="images/2813_aoip_edit.png" alt="" height="239" width="400" border="0"></p>
    <p>Or press Discovery to bring up the mDNS/SAP discovery dialog</p>
    <img src="images/settings_input_discovery.png" alt="" height="240" width="399" border="0">
    <p>From here the user can choose to listen from RTSP mDNS messages and/or
      SAP messages. </p>
    <p>Note: Usually selecting "Local" is enough if you wish to listen for SAP
      messages.<br>
      Note: Currently SIP is not fully implemented.</p>
    <p>Press the Discovery toggle button to Start/Stop discovery. The right hand
      side of the screen is log showing what has been discovered.</p>
    <p>Note: SAP messages can take a minute or two to appear depending on the
      equipment sending them.</p>
    <h5>AoIP Manual</h5>
    <p>This allows the user to enter manual settings to connect to a multicast
      AES67/SMPTE2110-30 audio stream.</p>
    <p><img src="images/settings_input_aoip_manual.png" alt="" height="240" width="399" border="0">
    </p>
    <p>The procedure is as follows:</p>
    <ul>
      <li>Enter the multicast address and port number that the audio stream is
        being transmitted on.</li>
      <li>Enter the sample rate.</li>
      <li>Select whether the stream is 16 or 24 bits per sample.</li>
      <li>Choose the number of audio channels the stream is providing.</li>
      <li>Press the Receive toggle button to Start/Stop the stream.</li>
    </ul>
    <p>Note: You must stop the stream if you want to make any changes to the
      receiver.</p>
    <p>When you press the Receive button an SDP "file" is created and sent to
      the AoIP receiver. You can see the contents of the SDP from the Log or
      Session Info plugin.</p>
    <h4>Audio Output</h4>
    <img src="images/settings_output_soundcard.png" alt="" height="240" width="399" border="0">
    <p>The audio output page allows the user to choose what audio output device
      to use if any. The options are "Disabled", "Soundcard" or AoIP.</p>
    <p><span style="text-decoration: underline;">Soundcard (as shown above):</span></p>
    <p>The list of available soundcard outputs is listed along with the audio
      buffer delay and an option to change the volume of the audio before it is
      sent to the soundcard.</p>
    <img src="images/settings_output_aoip.png" alt="" height="240" width="399" border="0">
    <p><span style="text-decoration: underline;">AoIP (as shown above):</span></p>
    <p>This panel allows the user to configure the SMPTE2110-30 sender. The
      sender can work in two modes</p>
    <ol>
      <li>Unicast - this is an "on-demand" server. Audio is not sent until a
        receiver connects to the RTSP server and asks for the stream to start.</li>
      <li>Multicast - this is an "always-on" server. Audio is sent to the
        defined multicast address. Clients can connect to the RTSP server or
        directly to the multicast address.</li>
    </ol>
    <p>The procedure is as follows</p>
    <ul>
      <li>Choose the network interface you wish the RTSP server to use (usually
        eth0) and the IP port number.</li>
      <li>Decide on the length of each audio IP packet.</li>
      <li>Select whether you want to stream Unicast or Multicast.</li>
      <ul>
        <li>If you choose multicast enter the multicast address and IP port to
          use for the RTP stream.</li>
        <li>If you choose unicast enter the IP port to use for the RTP stream</li>
      </ul>
      <li>Choose which methods (if any) to use to advertise the stream</li>
      <ul>
        <li>mDNS-SD - available in unicast and multicast mode. This is the
          preferred mode for Ravenna</li>
        <li>SAP - available in multicast mode only. This is the preferred mode
          for Dante.</li>
      </ul>
    </ul>
    <p>Note: If the optional NMOS module is active then these settings may be
      overwritten via NMOS.</p>
    <p>Note: If you make any changes to these settings you may need to press the
      <strong>Restart Stream</strong> button<strong></strong> to see any effect.</p>
    <p><strong>RTCP Stats</strong></p>
    <p>The PAM AoIP server sends out RTCP messages as a matter of course. From
      the AoIP panel (by pressing the <strong>RTCP Stats</strong> button)&nbsp;
      you can bring up a number of panels which allow you to analyse the data. </p>
    <p><img src="images/settings_output_rtcp_subscribers.png" alt="" height="240" width="399" border="0"></p>
    <p>The left hand side of the panel shows the statistics and a
      graph/histogram at the bottom.</p>
    <ul>
      <li>First RR - the time the first Receiver Report was received from the
        selected Subscriber.</li>
      <li>Lastet RR - the time the latest Receiver Report was received from the
        selected Subscriber.</li>
      <li>RR Gap - the time between the latest Receiver Report and the one
        before it.</li>
      <li>SR RR Diff - the time between the Sender Report being sent by the PAM
        and the Receiver Report being returned.</li>
      <li>First Packet - the highest RTP sequence number received by the
        Subscriber when it sent the First RR.</li>
      <li>Latest Packet - the highest RTP sequence number received by the
        Subscriber when it sent the Latest RR.</li>
      <li>Total Packets - the total number of RTP packets the Subscriber has
        received.</li>
      <li>Lost Packets - the total number of RTP packets the Subscriber did not
        receive.</li>
      <li>kBits/s Min - the minimum data rate of the RTP stream that the
        Subscriber received.</li>
      <li>kBits/s Average - the average data rate of the RTP stream that the
        Subscriber received.</li>
      <li>kBits/s Max - the maximum data rate of the RTP stream that the
        Subscriber received.</li>
      <li>Packets Lost/s Min - the minimum number of RTP packets lost by the
        Subsciber per second.</li>
      <li>Packets Lost/s Average - the average number of RTP packets lost by the
        Subsciber per second.</li>
      <li>Packets Lost/s Max - the maximum number of RTP packets lost by the
        Subsciber per second.</li>
      <li>Jitter - an estimate of the statistical variance of the RTP data
        packet interarrival time.</li>
      <li>Roundtip delay - an estimate of the network delay between the Sender
        and the Subscriber.</li>
      <li>Current Graph - the graph/histogram currently being displaye.</li>
    </ul>
    <p>The right hand side of the panel shows either the clients that are taking
      the stream (<strong>Subscribers)</strong> or a selection of options to
      change the graph display</p>
    <p><img src="images/settings_output_rtcp_histogram.png" alt="" height="240" width="399" border="0"></p>
    <p>From the options pane you can</p>
    <ul>
      <li>Select the graph/histogram to show</li>
      <li>Decide whether to show</li>
      <ul>
        <li>Line graph - shows a point for each bit of data with a line between
          the points.</li>
        <li>Bar graph - shows a bar for each bit of data.</li>
        <li>Histogram (as above) - puts the data in to different "pots"
          depending on the granularity of the histogram and displays the number
          of items in each "pot".</li>
      </ul>
      <li>Increase, decrease, reset the granularity of the histogram.</li>
      <li>Increase, decrease, reset the resolution of the histogram</li>
      <li>Reset the y-axis range of the line/bar graph</li>
      <li>Clear the graphs completely.</li>
    </ul>
    Note: When showing a histogram you can scroll the x-axis by pressing the
    graph and moving your finger left or right.<br>
    <p><strong>Output Source</strong></p>
    <p><img src="images/2813_input.jpg" alt="" height="241" width="400" border="0"></p>
    <p>&nbsp;</p>
    <p>The output source page allows the user to choose the source of audio that
      the PAM will output. Playback must be set to "On" from the Audio Output
      setting page to enable this panel.</p>
    <p>There are 5 inbuilt possible source options</p>
    <p><span style="text-decoration: underline;">Input</span></p>
    <p>See screen above. The audio output is taken from the audio input to the
      PAM. The user can choose what audio channel is output on the Left and
      Right legs of the output/</p>
    <p><span style="text-decoration: underline;">File</span></p>
    <p><img src="images/2813_file.jpg" alt="" height="241" width="400" border="0"></p>
    <p>Audio is played back from a wav file. The panel lists all the wav files
      found on the PAM. The wav file is looped.</p>
    <p><span style="text-decoration: underline;">Sequence</span></p>
    <p><span style="text-decoration: underline;"><img src="images/2813_sequence.jpg"
          alt="" height="239" width="400" border="0"></span></p>
    <p>The PAM can play back a sequence of tones. These can be created/edited
      using the Sequence Editor.&nbsp;</p>
    <p>The panel shows the sequences that have been created.</p>
    <p><span style="text-decoration: underline;">Generator</span></p>
    <p><span style="text-decoration: underline;"><img src="images/2813_generator.jpg"
          alt="" height="240" width="400" border="0"></span></p>
    <p>If the Generator option is selected the PAM will output a single
      frequency tone. The Generator panel allows the user to select the
      Frequency, Amplitude and shape of the wave form.</p>
    <p><span style="text-decoration: underline;">Noise<br>
        <img src="images/2813_noise.jpg" alt="" height="240" width="400" border="0"></span></p>
    <p>The PAM can output different colours of Noise. The user can select the
      noise type and amplitude.</p>
    <p><span style="text-decoration: underline;">Generator Plugins</span></p>
    <p>It is possible to write plugins to act as output sources. Any loaded
      plugins will appear in the options list. Selecting the plugin will bring
      up the settings page for that plugin and use it to generate audio samples.
      The screenshot below shows the LTC plugin</p>
    <p><img src="images/2813_output_source.png" alt="" height="221" width="400"
        border="0"></p>
    <p>Information on generator plugins can be found on their individual pages.</p>
    <h4>&nbsp;Network</h4>
    <p><img src="images/2813_network.JPG" alt="network" height="240" width="402"
        border="0"></p>
    <p>The Network page allows the user to set the properties of the wired and
      wifi connections of the Pi. It also shows whether each network device is
      connected or not.</p>
    <p>It is also possible from this screen to bring up the WiFi manager.</p>
    <h4>Time</h4>
    <p><img src="images/settings_time_ntp.png" alt="" height="240" width="399" border="0"></p>
    <p>The Time panel allows the user to decide whether he wants to sync the
      PAM's system clock to NTP or PTP.</p>
    <p>It also allows the user to define the NTP servers and the PTP domain.</p>
    Plugins
    <p><img src="images/2813_plugins.png" alt="" height="280" width="400" border="0"></p>
    <p>The plugins page allows the user to decide which Monitor,Test and
      Generator plugins he wishes to have running in the application and the
      order that they will appear.</p>
    <p>The list at the top of the screen decides whether the user is looking at
      Monitor, Test or Generator Plugins.</p>
    <p>The left hand side of the screen lists all plugins of the relevant type
      that have not currently been assigned to run in the application. The
      section below shows the version number and a brief description of the
      selected plugin.</p>
    <p>The right hand side of the screen lists all the plugins of the relevan
      type that are currently assigned to run in the application. They are
      listed in the order that they appear on the Screen Selection buttons. The
      section below shows the version number and a brief description of the
      plugin.</p>
    <p><u>To Add A New Plugin</u></p>
    <ul>
      <li>Select the plugin from the list of Possible Plugins.</li>
      <li>Press and hold the "Hold To Add" button until the plugin appears at
        the end of the list of Current Plugins. The plugin will disappear from
        the list of Possible Plugins.</li>
      <li>Press and hold the "Hold to Apply" button to apply the changes.</li>
    </ul>
    <p><u>To Remove A Plugin</u></p>
    <ul>
      <li>Select the plugin from the list of Current Plugins</li>
      <li>Press and hold the "Hold To Remove" button until the plugin appears at
        the end of the list of Possible Plugins. The plugin will disappear from
        the list of Current Plugins.</li>
      <li>Press and hold the "Hold to Apply" button to apply the changes.</li>
    </ul>
    <p><u>To Change The Position Of A Plugin</u></p>
    <ul>
      <li>Select the plugin from the list of Current Plugins</li>
      <li>Use the Move Up and Move Down buttons to change the plugin position.</li>
      <li>Press and hold the "Hold to Apply" button to apply the changes.</li>
    </ul>
    <h4>Update</h4>
    <p><img src="images/2813_update_http.JPG" alt="update" height="240" width="403"
        border="0"></p>
    <p>The Update screen allows the user to decide in where updates should be
      retrieved from. There are 4 options</p>
    <ul>
      <li>HTTP - the unit will connect to a web server (e.g. the pamupdateserver
        standalone web server). The user should enter the URL or IP address of
        the web server</li>
      <li>Share - the unit will connect to a Samba share. The user should enter
        the address of the share.</li>
      <li>Local - the unit will look in a local directory for its updates.
        Selecting this allows the user to select the local folder.</li>
      <li>USB&nbsp; - the unit will attempt to detect a connected USB device and
        use this for the update.</li>
    </ul>
    <p>Once the method of updating has been decided the user can press the Check
      For Updates button to launch the Update Manager.</p>
    <p><img src="images/2813_update_manager_available.JPG" alt="updatemanager_available"
        height="240" width="394" border="0"></p>
    <p>The Update Manager lists all plugins, core applications and libraries,
      profiles and documentation.</p>
    <p>The user can select whether he wishes to see all the types of updates or
      a subsection and also whether the manager should only show updates that
      are newer than the installed ones.</p>
    <p>The user can select one or more items (or use the (De)Select All buttons)
      and then View the Changelogs for the items, View the Dependencies for the
      items or simply Update the Selected items.</p>
    <p>On pressing Update Selected all the selected items and any dependencies
      will be updated. <span style="color: #ff0000;">Note the application must
        be restarted for the update to finally take effect.</span></p>
    <p><u>Changelog</u></p>
    <p><img src="images/2813_update_manager_available_changelog.JPG" alt="updatemanager_changelog"
        height="240" width="400" border="0"></p>
    <p>On pressing the View Changelog button the user is presented with a page
      that lists all the selected items and the changes that have been made to
      each item.</p>
    <p>Pressing the View Changelog button will return the user to the Update
      Manager screen.</p>
    <p><u>Dependencies</u></p>
    <p><img src="images/2813_update_manager_available_dependencies.JPG" alt="updatemanager_dependencies"
        height="240" width="397" border="0"></p>
    <p>On pressing the View Dependencies button the user is presented with a
      page that lists all the selected items. Underneath each item is a table
      showing the libraries (with version number) that this item depends on.
      Should the user choose to update the item then the depencies will also be
      updated.</p>
    <p>Pressing the View Dependencies button will return the user to the Update
      Manager screen.</p>
    <p>&nbsp;</p>
    <p><strong>Profiles</strong></p>
    <p><strong><img src="images/2813_profiles.jpg" alt="" height="240" width="400"
          border="0"></strong></p>
    <p>It is possible to save the state of the PAM (including all Setting values
      and Plugin option values) as a Profile for reloading at a later date.</p>
    <p>The above panel lists all the saved profiles and allows the user to:</p>
    <ul>
      <li>Load a selected profile</li>
      <li>Rename a selected profile</li>
      <li>Delete a selected profile</li>
      <li>Save the current settings to a profile</li>
    </ul>
    <p><span style="color: #ff0000;">Note: Loading a profile will restart the
        PAM application and overwrite all the current Settngs and Options</span></p>
    <p>&nbsp;</p>
    <p><strong><span style="color: #000000;">General</span></strong></p>
    <p><span style="color: #000000;"><strong><img src="images/2813_general.jpg"
            alt="" height="239" width="400" border="0"></strong></span></p>
    <p><span style="color: #000000;">The General settings page has a number of
        miscellaneous options:</span></p>
    <ul>
      <li><span style="color: #000000;">Whether a cursor should be shown or not
          on the PAM.</span></li>
      <li><span style="color: #000000;">When touching or clicking on the screen
          should the right hand pane default to&nbsp;<strong><span style="color: #33cccc;">Screen
              Selection</span></strong> or <strong><span style="color: #33ccff;">Option
              Selection</span></strong></span></li>
      <li><span style="color: #000000;">Whether the Settings menu should be
          protected by a PIN and if so what the PIN is.</span></li>
    </ul>
    <h3>Help</h3>
    <p>The Help page is built in to the core application.&nbsp;</p>
    <p>Pressing the Help page button will bring up the help for the currently
      selected plugin.</p>
    <p>Pressing the Close button will return the user to the selected plugin.</p>
    <h3>Log</h3>
    <img src="images/log.png" alt="" height="240" width="399" border="0">
    <p>The Log page is built in to the core application.</p>
    <p>The log page shows a detailed log of what the application has been up to
      since it last started. The user can use the <span style="color: #996600;">Home</span>,
      <span style="color: #996600;">Page Up</span>, <span style="color: #996600;">Page
        Down </span>and <span style="color: #996600;">End </span><br>
      to navigate through the log. The user can also swipe on the screen to
      scroll the log.</p>
    <p>If the <span style="color: #996600;">Scroll Lock</span> switch is set to
      Scroll then the log will keep refreshing. If set to Lock then the
      currently display page will remain.</p>
    <p>Pressing <span style="color: #996600;">Clear Log </span>will clear all
      the log pages.</p>
    <p>&nbsp;</p>
    <h3>Test</h3>
    <p>The Test page is built in to the core application. It is always the
      fourth to last <strong><span style="color: #33cccc;">Screen Selection </span></strong>button.</p>
    <p>The page simply acts as a host page for all Test plugins. When the user
      selects the Test page the&nbsp; <strong><span style="color: #33cccc;">Option
          Selection </span></strong>buttons will list all the loaded Test
      plugins and the last selected one will be displayed.</p>
    <p>&nbsp;</p>
  </body>
</html>
